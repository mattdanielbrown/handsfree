(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{418:function(e,t,n){"use strict";n.r(t);n(172),n(321),n(96),n(175),n(98),n(9),n(97);var i,s=n(23),a=n(44),o=(n(69),n(350)),r=(n(99),n(46)),d=n(101),h=n(100),c=(n(346),function(){function e(t,n){var i=arguments,a=this;Object(s.a)(this,e),this.handsfree=t,this.config=n,this.data={},this.dependenciesLoaded=!1,this.enabled=n.enabled,this.plugins=[],setTimeout((function(){var e=a.getData;a.getData=Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.apply(a,i);case 2:return n=t.sent,a.runPlugins(),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))}),0)}return Object(a.a)(e,[{key:"loadDependencies",value:function(e){}},{key:"updateData",value:function(){}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.handsfree.config[this.name]=this.config,this.handsfree.config[this.name].enabled=this.enabled=!0,document.body.classList.add("handsfree-model-".concat(this.name)),e&&!this.dependenciesLoaded&&this.loadDependencies(),"weboji"===this.name&&(this.handsfree.debug.$canvas.weboji.style.display="block")}},{key:"disable",value:function(){var e=this;this.handsfree.config[this.name]=this.config,this.handsfree.config[this.name].enabled=this.enabled=!1,document.body.classList.remove("handsfree-model-".concat(this.name)),setTimeout((function(){"weboji"===e.name?e.handsfree.debug.$canvas.weboji.style.display="none":e.handsfree.debug.context[e.name].clearRect(0,0,e.handsfree.debug.$canvas[e.name].width,e.handsfree.debug.$canvas[e.name].height)}),0)}},{key:"loadDependency",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i)t&&t();else{var s=document.createElement("script");s.async=!0,s.onload=function(){t&&t()},s.onerror=function(){n.handsfree.emit("modelError","Error loading ".concat(e))},s.src=e,document.body.appendChild(s)}}},{key:"runPlugins",value:function(){var e=this;this.data&&("handpose"!==this.name||this.data.annotations)&&Object.keys(this.data).length&&this.plugins.forEach((function(t){var n;e.handsfree.plugin[t].enabled&&(null===(n=e.handsfree.plugin[t])||void 0===n||n.onFrame(e.handsfree.data))}))}}]),e}()),l=function(e){Object(d.a)(i,e);var t,n=Object(h.a)(i);function i(e,t){var a;return Object(s.a)(this,i),(a=n.call(this,e,t)).name="hands",a.palmPoints=[0,1,2,5,9,13,17],a}return Object(a.a)(i,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),(function(){t.onWarmUp(e)}),!!window.drawConnectors):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/hands/hands.js"),(function(){t.api=new window.Hands({locateFile:function(e){return"".concat(t.handsfree.config.assetsPath,"/@mediapipe/hands/").concat(e)}}),t.api.setOptions(t.handsfree.config.hands),t.api.onResults((function(e){return t.dataReceived(e)})),t.handsfree.getUserMedia((function(){t.handsfree.mediapipeWarmups.isWarmingUp?t.handsfree.on("mediapipeWarmedUp",(function(){t.handsfree.mediapipeWarmups.isWarmingUp||t.handsfree.mediapipeWarmups[t.name]||t.warmUp(e)})):t.warmUp(e)})),t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),null,!!window.drawConnectors)}))}},{key:"warmUp",value:function(e){var t=this;this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then((function(){t.handsfree.mediapipeWarmups.isWarmingUp=!1,t.onWarmUp(e)}))}},{key:"onWarmUp",value:function(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-hands"),this.handsfree.emit("modelReady",this),this.handsfree.emit("handsModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.dependenciesLoaded,!e.t0){e.next=4;break}return e.next=4,this.api.send({image:this.handsfree.debug.$video});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataReceived",value:function(e){this.data=e,this.handsfree.data.hands=e,this.handsfree.isDebugging&&this.debug(e)}},{key:"debug",value:function(e){if("undefined"!=typeof drawConnectors&&(this.handsfree.debug.context.hands.clearRect(0,0,this.handsfree.debug.$canvas.hands.width,this.handsfree.debug.$canvas.hands.height),e.multiHandLandmarks)){var t,n=Object(o.a)(e.multiHandLandmarks);try{for(n.s();!(t=n.n()).done;){var i=t.value;drawConnectors(this.handsfree.debug.context.hands,i,HAND_CONNECTIONS,{color:"#00FF00",lineWidth:5}),drawLandmarks(this.handsfree.debug.context.hands,i,{color:"#FF0000",lineWidth:2})}}catch(e){n.e(e)}finally{n.f()}}}}]),i}(c),u=function(e){Object(d.a)(i,e);var t,n=Object(h.a)(i);function i(e,t){var a;return Object(s.a)(this,i),(a=n.call(this,e,t)).name="facemesh",a.isWarmedUp=!1,a}return Object(a.a)(i,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),(function(){t.onWarmUp(e)}),!!window.drawConnectors):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/face_mesh/face_mesh.js"),(function(){t.api=new window.FaceMesh({locateFile:function(e){return"".concat(t.handsfree.config.assetsPath,"/@mediapipe/face_mesh/").concat(e)}}),t.api.setOptions(t.handsfree.config.facemesh),t.api.onResults((function(e){return t.dataReceived(e)})),t.handsfree.getUserMedia((function(){t.handsfree.mediapipeWarmups.isWarmingUp?t.handsfree.on("mediapipeWarmedUp",(function(){t.handsfree.mediapipeWarmups.isWarmingUp||t.handsfree.mediapipeWarmups[t.name]||t.warmUp(e)})):t.warmUp(e)})),t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),null,!!window.drawConnectors)}))}},{key:"warmUp",value:function(e){var t=this;this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then((function(){t.handsfree.mediapipeWarmups.isWarmingUp=!1,t.onWarmUp(e)}))}},{key:"onWarmUp",value:function(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-facemesh"),this.handsfree.emit("modelReady",this),this.handsfree.emit("facemeshModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.dependenciesLoaded,!e.t0){e.next=4;break}return e.next=4,this.api.send({image:this.handsfree.debug.$video});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataReceived",value:function(e){this.data=e,this.handsfree.data.facemesh=e,this.handsfree.isDebugging&&this.debug(e)}},{key:"debug",value:function(e){if("undefined"!=typeof drawConnectors&&(this.handsfree.debug.context.facemesh.clearRect(0,0,this.handsfree.debug.$canvas.facemesh.width,this.handsfree.debug.$canvas.facemesh.height),e.multiFaceLandmarks)){var t,n=Object(o.a)(e.multiFaceLandmarks);try{for(n.s();!(t=n.n()).done;){var i=t.value;drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_TESSELATION,{color:"#C0C0C070",lineWidth:1}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_RIGHT_EYE,{color:"#FF3030"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_RIGHT_EYEBROW,{color:"#FF3030"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_LEFT_EYE,{color:"#30FF30"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_LEFT_EYEBROW,{color:"#30FF30"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_FACE_OVAL,{color:"#E0E0E0"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_LIPS,{color:"#E0E0E0"})}}catch(e){n.e(e)}finally{n.f()}}}}]),i}(c),f=function(e){Object(d.a)(i,e);var t,n=Object(h.a)(i);function i(e,t){var a;return Object(s.a)(this,i),(a=n.call(this,e,t)).name="pose",a.hasLoadedAndRun=!1,a.palmPoints=[0,1,2,5,9,13,17],a}return Object(a.a)(i,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),(function(){t.onWarmUp(e)}),!!window.drawConnectors):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/pose/pose.js"),(function(){t.api=new window.Pose({locateFile:function(e){return"".concat(t.handsfree.config.assetsPath,"/@mediapipe/pose/").concat(e)}}),t.api.setOptions(t.handsfree.config.pose),t.api.onResults((function(e){return t.dataReceived(e)})),t.handsfree.getUserMedia((function(){t.handsfree.mediapipeWarmups.isWarmingUp?t.handsfree.on("mediapipeWarmedUp",(function(){t.handsfree.mediapipeWarmups.isWarmingUp||t.handsfree.mediapipeWarmups[t.name]||t.warmUp(e)})):t.warmUp(e)})),t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),null,!!window.drawConnectors)}))}},{key:"warmUp",value:function(e){var t=this;this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then((function(){t.handsfree.mediapipeWarmups.isWarmingUp=!1,t.onWarmUp(e)}))}},{key:"onWarmUp",value:function(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-pose"),this.handsfree.emit("modelReady",this),this.handsfree.emit("poseModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.dependenciesLoaded,!e.t0){e.next=4;break}return e.next=4,this.api.send({image:this.handsfree.debug.$video});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataReceived",value:function(e){this.data=e,this.handsfree.data.pose=e,this.handsfree.isDebugging&&this.debug(e)}},{key:"debug",value:function(e){this.handsfree.debug.context.pose.clearRect(0,0,this.handsfree.debug.$canvas.pose.width,this.handsfree.debug.$canvas.pose.height),e.poseLandmarks&&(drawConnectors(this.handsfree.debug.context.pose,e.poseLandmarks,POSE_CONNECTIONS,{color:"#00FF00",lineWidth:4}),drawLandmarks(this.handsfree.debug.context.pose,e.poseLandmarks,{color:"#FF0000",lineWidth:2}))}}]),i}(c),p=function(e){Object(d.a)(i,e);var t,n=Object(h.a)(i);function i(e,t){var a;return Object(s.a)(this,i),(a=n.call(this,e,t)).name="holistic",a.hasLoadedAndRun=!1,a.palmPoints=[0,1,2,5,9,13,17],a}return Object(a.a)(i,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),(function(){t.onWarmUp(e)}),!!window.drawConnectors):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/holistic/holistic.js"),(function(){t.api=new window.Holistic({locateFile:function(e){return"".concat(t.handsfree.config.assetsPath,"/@mediapipe/holistic/").concat(e)}}),t.api.setOptions(t.handsfree.config.holistic),t.api.onResults((function(e){return t.dataReceived(e)})),t.handsfree.getUserMedia((function(){t.handsfree.mediapipeWarmups.isWarmingUp?t.handsfree.on("mediapipeWarmedUp",(function(){t.handsfree.mediapipeWarmups.isWarmingUp||t.handsfree.mediapipeWarmups[t.name]||t.warmUp(e)})):t.warmUp(e)})),t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),null,!!window.drawConnectors)}))}},{key:"warmUp",value:function(e){var t=this;this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then((function(){t.handsfree.mediapipeWarmups.isWarmingUp=!1,t.onWarmUp(e)}))}},{key:"onWarmUp",value:function(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-holistic"),this.handsfree.emit("modelReady",this),this.handsfree.emit("holisticModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.dependenciesLoaded,!e.t0){e.next=4;break}return e.next=4,this.api.send({image:this.handsfree.debug.$video});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataReceived",value:function(e){this.data=e,this.handsfree.data.holistic=e,this.handsfree.isDebugging&&this.debug(e)}},{key:"debug",value:function(e){this.handsfree.debug.context.holistic.clearRect(0,0,this.handsfree.debug.$canvas.holistic.width,this.handsfree.debug.$canvas.holistic.height),drawConnectors(this.handsfree.debug.context.holistic,e.poseLandmarks,POSE_CONNECTIONS,{color:"#0f0",lineWidth:4}),drawLandmarks(this.handsfree.debug.context.holistic,e.poseLandmarks,{color:"#f00",lineWidth:2}),drawConnectors(this.handsfree.debug.context.holistic,e.faceLandmarks,FACEMESH_TESSELATION,{color:"#f0f",lineWidth:1}),drawConnectors(this.handsfree.debug.context.holistic,e.leftHandLandmarks,HAND_CONNECTIONS,{color:"#0f0",lineWidth:5}),drawLandmarks(this.handsfree.debug.context.holistic,e.leftHandLandmarks,{color:"#f0f",lineWidth:2}),drawConnectors(this.handsfree.debug.context.holistic,e.rightHandLandmarks,HAND_CONNECTIONS,{color:"#0f0",lineWidth:5}),drawLandmarks(this.handsfree.debug.context.holistic,e.rightHandLandmarks,{color:"#f0f",lineWidth:2})}}]),i}(c),g=(n(174),n(41)),m=n(391),b=function(e){Object(d.a)(i,e);var t,n=Object(h.a)(i);function i(e,t){var a;return Object(s.a)(this,i),(a=n.call(this,e,t)).name="handpose",a.three={scene:null,camera:null,renderer:null,meshes:[]},a.palmPoints=[0,1,2,5,9,13,17],a}return Object(a.a)(i,[{key:"loadDependencies",value:function(e){var t=this;this.loadDependency("".concat(this.handsfree.config.assetsPath,"/three/three.min.js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow/tf-core.js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow/tf-converter.js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow/tf-backend-").concat(t.handsfree.config.handpose.backend,".js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow-models/handpose/handpose.js"),(function(){t.handsfree.getUserMedia(Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.tf.setBackend(t.handsfree.config.handpose.backend);case 2:return n.next=4,handpose.load(t.handsfree.config.handpose.model);case 4:t.api=n.sent,t.setup3D(),e&&e(t),t.dependenciesLoaded=!0,t.handsfree.emit("modelReady",t),t.handsfree.emit("handposeModelReady",t),document.body.classList.add("handsfree-model-handpose");case 11:case"end":return n.stop()}}),n)}))))}))}))}))}),!!window.tf)}),!!window.THREE)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.handsfree.debug.$video){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.api.estimateHands(this.handsfree.debug.$video);case 4:return t=e.sent,this.data=Object(m.a)(Object(m.a)({},t[0]),{},{meshes:this.three.meshes}),t[0]&&this.updateMeshes(this.data),this.three.renderer.render(this.three.scene,this.three.camera),e.abrupt("return",this.data);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setup3D",value:function(){this.three={scene:new window.THREE.Scene,camera:new window.THREE.PerspectiveCamera(90,window.outerWidth/window.outerHeight,.1,1e3),renderer:new THREE.WebGLRenderer({alpha:!0,canvas:this.handsfree.debug.$canvas.handpose}),meshes:[]},this.three.renderer.setSize(window.outerWidth,window.outerHeight),this.three.camera.position.z=this.handsfree.debug.$video.videoWidth/4,this.three.camera.lookAt(new window.THREE.Vector3(0,0,0)),this.three.screen=new window.THREE.Mesh(new window.THREE.BoxGeometry(window.outerWidth,window.outerHeight,1),new window.THREE.MeshNormalMaterial),this.three.screen.position.z=300,this.three.scene.add(this.three.screen),this.three.raycaster=new window.THREE.Raycaster,this.three.arrow=new window.THREE.ArrowHelper(this.three.raycaster.ray.direction,this.three.raycaster.ray.origin,300,16711680),this.three.scene.add(this.three.arrow);for(var e=0;e<21;e++){var t=this.getLandmarkProperty(e).isPalm,n=new window.THREE.Object3D,i=new window.THREE.CylinderGeometry(t?5:10,5,1),s=new window.THREE.MeshNormalMaterial,a=new window.THREE.Mesh(i,s);a.rotation.x=Math.PI/2,n.add(a),this.three.scene.add(n),this.three.meshes.push(n)}var o=new window.THREE.Object3D,r=new window.THREE.CylinderGeometry(5,5,1),d=new window.THREE.MeshNormalMaterial,h=new window.THREE.Mesh(r,d);h.rotation.x=Math.PI/2,this.three.centerPalmObj=o,o.add(h),this.three.scene.add(o),this.three.meshes.push(o),this.three.screen.visible=!1}},{key:"getLandmarkProperty",value:function(e){var t=[0,1,2,5,9,13,17],n=t.indexOf(e),i=-1!=n;return{isPalm:i,next:i?t[(n+1)%t.length]:e-1}}},{key:"updateMeshes",value:function(e){for(var t=0;t<this.three.meshes.length-1;t++){var n=this.getLandmarkProperty(t).next,i=this.webcam2space.apply(this,Object(g.a)(e.landmarks[t])),s=this.webcam2space.apply(this,Object(g.a)(e.landmarks[n])),a=i.clone().lerp(s,.5);if(this.three.meshes[t].position.set(a.x,a.y,a.z),this.three.meshes[t].scale.z=i.distanceTo(s),this.three.meshes[t].lookAt(s),8===t){this.three.arrow.position.set(a.x,a.y,a.z);var o=(new window.THREE.Vector3).subVectors(i,a);this.three.arrow.setDirection(o.normalize()),this.three.arrow.setLength(800),this.three.arrow.direction=o}}this.updateCenterPalmMesh(e)}},{key:"updateCenterPalmMesh",value:function(e){var t=this,n=[],i={x:0,y:0,z:0};this.palmPoints.forEach((function(s,a){n.push(t.webcam2space.apply(t,Object(g.a)(e.landmarks[s]))),i.x+=n[a].x,i.y+=n[a].y,i.z+=n[a].z})),i.x=i.x/this.palmPoints.length,i.y=i.y/this.palmPoints.length,i.z=i.z/this.palmPoints.length,this.three.centerPalmObj.position.set(i.x,i.y,i.z),this.three.centerPalmObj.scale.z=10,this.three.centerPalmObj.rotation.x=this.three.meshes[12].rotation.x-Math.PI/2,this.three.centerPalmObj.rotation.y=-this.three.meshes[12].rotation.y,this.three.centerPalmObj.rotation.z=this.three.meshes[12].rotation.z}},{key:"webcam2space",value:function(e,t,n){return new window.THREE.Vector3(e-this.handsfree.debug.$video.videoWidth/2,-(t-this.handsfree.debug.$video.videoHeight/2),-n)}}]),i}(c),w=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e,i){var a;return Object(s.a)(this,n),(a=t.call(this,e,i)).name="weboji",a}return Object(a.a)(n,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.onReady(e):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/jeeliz/jeelizFaceTransfer.js"),(function(){var n=t.handsfree.config.assetsPath+"/jeeliz/jeelizFaceTransferNNC.json";t.api=window.JEEFACETRANSFERAPI,fetch(n).then((function(e){return e.json()})).then((function(n){t.api.init({canvasId:"handsfree-canvas-weboji-".concat(t.handsfree.id),NNC:JSON.stringify(n),videoSettings:t.handsfree.config.weboji.videoSettings,callbackReady:function(){return t.onReady(e)}})})).catch((function(e){console.log(e),console.error("Couldn't load weboji tracking model at ".concat(n)),t.handsfree.emit("modelError",e)}))}))}},{key:"onReady",value:function(e){this.dependenciesLoaded=!0,this.handsfree.emit("modelReady",this),this.handsfree.emit("webojiModelReady",this),document.body.classList.add("handsfree-model-weboji"),e&&e(this)}},{key:"getData",value:function(){return this.data.rotation=this.api.get_rotationStabilized(),this.data.translation=this.api.get_positionScale(),this.data.morphs=this.api.get_morphTargetInfluencesStabilized(),this.data.state=this.getStates(),this.data.degree=this.getDegrees(),this.data.isDetected=this.api.is_detected(),this.handsfree.data.weboji=this.data,this.data}},{key:"getDegrees",value:function(){return[180*this.data.rotation[0]/Math.PI,180*this.data.rotation[1]/Math.PI,180*this.data.rotation[2]/Math.PI]}},{key:"getStates",value:function(){var e=this.data.morphs,t=this.data.state||{};return t.smileRight=e[0]>this.handsfree.config.weboji.morphs.threshold.smileRight,t.smileLeft=e[1]>this.handsfree.config.weboji.morphs.threshold.smileLeft,t.smile=t.smileRight&&t.smileLeft,t.smirk=t.smileRight&&!t.smileLeft||!t.smileRight&&t.smileLeft,t.pursed=e[7]>this.handsfree.config.weboji.morphs.threshold.mouthRound,t.browLeftUp=e[4]>this.handsfree.config.weboji.morphs.threshold.browLeftUp,t.browRightUp=e[5]>this.handsfree.config.weboji.morphs.threshold.browRightUp,t.browsUp=e[4]>this.handsfree.config.weboji.morphs.threshold.browLeftUp&&e[5]>this.handsfree.config.weboji.morphs.threshold.browLeftUp,t.browLeftDown=e[2]>this.handsfree.config.weboji.morphs.threshold.browLeftDown,t.browRightDown=e[3]>this.handsfree.config.weboji.morphs.threshold.browRightDown,t.browsDown=e[2]>this.handsfree.config.weboji.morphs.threshold.browLeftDown&&e[3]>this.handsfree.config.weboji.morphs.threshold.browLeftDown,t.browsUpDown=t.browLeftDown&&t.browRightUp||t.browRightDown&&t.browLeftUp,t.eyeLeftClosed=e[8]>this.handsfree.config.weboji.morphs.threshold.eyeLeftClosed,t.eyeRightClosed=e[9]>this.handsfree.config.weboji.morphs.threshold.eyeRightClosed,t.eyesClosed=t.eyeLeftClosed&&t.eyeRightClosed,t.mouthClosed=0===e[6],t.mouthOpen=e[6]>this.handsfree.config.weboji.morphs.threshold.mouthOpen,t}}]),n}(c),v=n(66),y=n(352),k=n.n(y),j=function(){function e(t,n){var i,a,o=this;Object(s.a)(this,e),this.plugin=t,this.handsfree=n,Object.keys(t).forEach((function(e){o[e]=t[e]}));var r=null===(i=n.config)||void 0===i||null===(a=i.plugin)||void 0===a?void 0:a[t.name];"boolean"==typeof r&&(r={enabled:r}),"object"===Object(v.a)(r)&&(k()(this.config,r),"boolean"==typeof r.enabled&&(this.enabled=r.enabled))}return Object(a.a)(e,[{key:"enable",value:function(){!this.enabled&&this.onEnable&&this.onEnable(this.handsfree),this.enabled=!0}},{key:"disable",value:function(){this.enabled&&this.onDisable&&this.onDisable(this.handsfree),this.enabled=!1}}]),e}(),E=n(357),L=n.n(E),x={assetsPath:"https://unpkg.com/handsfree@8.2.0/build/lib/assets",isCLient:!1,setup:{canvas:{weboji:{$el:null,width:1280,height:720},hands:{$el:null,width:1280,height:720},handpose:{$el:null,width:1280,height:720},holistic:{$el:null,width:1280,height:720},pose:{$el:null,width:1280,height:720},facemesh:{$el:null,width:1280,height:720}},video:{$el:null,width:1280,height:720},wrap:{$el:null,$parent:null}},weboji:{enabled:!1,throttle:0,videoSettings:{videoElement:null,deviceId:null,facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},morphs:{threshold:{smileRight:.7,smileLeft:.7,browLeftDown:.8,browRightDown:.8,browLeftUp:.8,browRightUp:.8,eyeLeftClosed:.4,eyeRightClosed:.4,mouthOpen:.3,mouthRound:.8,upperLip:.5}}},hands:{enabled:!1,maxNumHands:2,minDetectionConfidence:.5,minTrackingConfidence:.5},facemesh:{enabled:!1,maxNumFaces:1,minDetectionConfidence:.5,minTrackingConfidence:.5},pose:{enabled:!1,upperBodyOnly:!1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5},holistic:{enabled:!1,upperBodyOnly:!0,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5},handpose:{enabled:!1,backend:"webgl",maxContinuousChecks:1/0,detectionConfidence:.8,iouThreshold:.3,scoreThreshold:.75},plugin:{}},D=n(415),$={models:"weboji",enabled:!1,tags:["browser"],$pointer:null,pointer:{x:-20,y:-20},tween:{x:0,y:0,positionList:[]},config:{offset:{x:0,y:0,pitch:10,yaw:0,roll:0},speed:{x:1,y:1}},onEnable:function(){var e;if(!this.$pointer){var t=document.createElement("div");t.classList.add("handsfree-pointer","handsfree-pointer-face","handsfree-hide-when-started-without-weboji"),document.body.appendChild(t),this.$pointer=t}null===(e=this.$pointer)||void 0===e||e.classList.remove("handsfree-hidden")},onFrame:function(e){var t=e.weboji,n=t.translation[0]*window.outerWidth,i=window.outerHeight-t.translation[1]*window.outerHeight,s=(1-t.translation[2])*window.outerWidth*2.5;n+=s*Math.tan(t.rotation[1]+this.config.offset.yaw*Math.PI/180)*this.config.speed.x,i+=s*Math.tan(t.rotation[0]+this.config.offset.pitch*Math.PI/180)*this.config.speed.y-window.outerHeight,n+=this.config.offset.x,i+=this.config.offset.y,this.handsfree.TweenMax.to(this.tween,1,{x:n,y:i,overwrite:!0,ease:"linear.easeNone",immediateRender:!0}),this.$pointer.style.left="".concat(this.tween.x,"px"),this.$pointer.style.top="".concat(this.tween.y,"px"),t.pointer={x:this.tween.x,y:this.tween.y}},onDisable:function(){var e;null===(e=this.$pointer)||void 0===e||e.classList.add("handsfree-hidden")}},R={models:"weboji",enabled:!1,tags:["browser"],config:{throttle:50,maxMouseDownedFrames:1,morphs:{0:.25,1:.25}},mouseDowned:0,mouseUp:!1,thresholdMet:!1,onUse:function(){this.throttle(this.config.throttle)},throttle:function(e){this.maybeClick=this.handsfree.throttle((function(e){this.click(e)}),e,{trailing:!1})},onFrame:function(e){var t=this,n=e.weboji;this.thresholdMet=!1,Object.keys(this.config.morphs).forEach((function(e){var i=+t.config.morphs[e];i>0&&n.morphs[e]>=i&&(t.thresholdMet=!0)})),this.thresholdMet?(this.mouseDowned++,document.body.classList.add("handsfree-clicked")):(this.mouseUp=this.mouseDowned,this.mouseDowned=0,document.body.classList.remove("handsfree-clicked")),this.mouseDowned>0&&this.mouseDowned<=this.config.maxMouseDownedFrames?n.pointer.state="mouseDown":this.mouseDowned>this.config.maxMouseDownedFrames?n.pointer.state="mouseDrag":this.mouseUp&&(n.pointer.state="mouseUp"),"mouseDown"===n.pointer.state&&this.maybeClick(n)},click:function(e){var t=document.elementFromPoint(e.pointer.x,e.pointer.y);t&&(t.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:e.pointer.x,clientY:e.pointer.y})),["INPUT","TEXTAREA","BUTTON","A"].includes(t.nodeName)&&t.focus(),e.pointer.$target=t)},maybeClick:function(){}},O={models:"weboji",enabled:!1,tags:["browser"],numFramesFocused:0,$lastTarget:null,$target:null,config:{framesToFocus:10,vertScroll:{scrollSpeed:.05,scrollZone:100}},onUse:function(){this.$target=window},onFrame:function(e){var t=e.weboji;if(t.pointer.x||t.pointer.y){this.checkForFocus(t);var n,i=!1,s=this.getTargetScrollTop();n=this.$target.getBoundingClientRect?this.$target.getBoundingClientRect():{top:0,bottom:window.innerHeight},"mouseDown"===t.pointer.state&&(this.numFramesFocused=0,this.maybeSetTarget(t)),t.pointer.y<n.top+this.config.vertScroll.scrollZone&&(this.$target.scrollTo(0,s+(t.pointer.y-n.top-this.config.vertScroll.scrollZone)*this.config.vertScroll.scrollSpeed),i=!0),t.pointer.y>n.bottom-this.config.vertScroll.scrollZone&&(this.$target.scrollTo(0,s-(n.bottom-t.pointer.y-this.config.vertScroll.scrollZone)*this.config.vertScroll.scrollSpeed),i=!0),i&&this.maybeSelectNewTarget()}},maybeSelectNewTarget:function(){var e=this.getTargetScrollTop(),t=!1;this.$target.scrollTo(0,e+this.config.vertScroll.scrollSpeed),e===this.getTargetScrollTop()?(t=!0,this.$target.scrollTo(0,e-this.config.vertScroll.scrollSpeed),e===this.getTargetScrollTop()?t&&(this.numFramesFocused=0,this.selectTarget(this.recursivelyFindScrollbar(this.$target.parentElement))):this.$target.scrollTo(0,e+this.config.vertScroll.scrollSpeed)):this.$target.scrollTo(0,e-this.config.vertScroll.scrollSpeed)},getTargetScrollTop:function(){var e,t;return(null===(e=this.$target)||void 0===e?void 0:e.scrollY)||(null===(t=this.$target)||void 0===t?void 0:t.scrollTop)||0},checkForFocus:L()((function(e){var t=document.elementFromPoint(e.pointer.x,e.pointer.y);t&&((t=this.recursivelyFindScrollbar(t))===this.$lastTarget?++this.numFramesFocused:this.numFramesFocused=0,this.numFramesFocused>this.config.framesToFocus&&this.selectTarget(t),this.$lastTarget=t)}),100),selectTarget:function(e){this.$target.classList&&this.$target.classList.remove("handsfree-scroll-focus"),e&&e.classList&&e.classList.add("handsfree-scroll-focus"),"HTML"!==e.nodeName&&e.nodeName||(e=window),this.$target=e},maybeSetTarget:function(e){"mouseDown"===e.pointer.state&&e.pointer.$target&&this.selectTarget(this.recursivelyFindScrollbar(e.pointer.$target))},recursivelyFindScrollbar:function(e){var t=e&&e.getBoundingClientRect?getComputedStyle(e):{};return e&&e.scrollHeight>e.clientHeight&&("auto"===t.overflow||"auto scroll"===t.overflow||"auto"===t.overflowY||"auto scroll"===t.overflowY)?e:e&&e.parentElement?this.recursivelyFindScrollbar(e.parentElement):window}},P={models:"hands",tags:["browser"],enabled:!1,numFramesFocused:0,$target:null,origScrollTop:0,tweenScroll:{y:0},framesSinceLastGrab:0,config:{framesToFocus:10,threshold:50,numThresholdErrorFrames:5,speed:2},onUse:function(){this.$target=window},onFrame:function(e){var t=e.hands;if(t.multiHandLandmarks){var n=this.handsfree.debug.$canvas.hands.height,i=t.multiHandLandmarks[0][4].x-t.multiHandLandmarks[0][8].x,s=t.multiHandLandmarks[0][4].y-t.multiHandLandmarks[0][8].y,a=Math.sqrt(i*i+s*s)*n;this.thresholdMet=a<this.config.threshold,this.thresholdMet&&(this.framesSinceLastGrab>this.config.numThresholdErrorFrames&&(this.origScrollTop=this.getTargetScrollTop()+t.multiHandLandmarks[0][4].y*n*this.config.speed,this.handsfree.TweenMax.killTweensOf(this.tweenScroll)),this.framesSinceLastGrab=0),++this.framesSinceLastGrab,this.framesSinceLastGrab<this.config.numThresholdErrorFrames&&(this.handsfree.TweenMax.to(this.tweenScroll,1,{y:this.origScrollTop-t.multiHandLandmarks[0][4].y*n*this.config.speed,overwrite:!0,ease:"linear.easeNone",immediateRender:!0}),this.$target.scrollTo(0,this.tweenScroll.y))}},getTargetScrollTop:function(){return this.$target.scrollY||this.$target.scrollTop||0}},T=(n(173),n(351)),C={facePointer:$,faceClick:R,faceScroll:O,pinchScroll:P,pinchers:(i={models:"hands",enabled:!0,tags:["core"],fingertipIndex:[8,12,16,20],numFramesFocused:[[0,0,0,0],[0,0,0,0]],thresholdMet:[[0,0,0,0],[0,0,0,0]],framesSinceLastGrab:[[0,0,0,0],[0,0,0,0]],origPinch:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]],curPinch:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]],pinchDowned:[[0,0,0,0],[0,0,0,0]],pinchDown:[[!1,!1,!1,!1],[!1,!1,!1,!1]],pinchUp:[[!1,!1,!1,!1],[!1,!1,!1,!1]],tween:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]]},Object(T.a)(i,"numFramesFocused",[[0,0,0,0],[0,0,0,0]]),Object(T.a)(i,"mouseDowned",0),Object(T.a)(i,"mouseUp",!1),Object(T.a)(i,"mouseThresholdMet",!1),Object(T.a)(i,"config",{framesToFocus:10,threshold:50,numThresholdErrorFrames:5,maxMouseDownedFrames:1}),Object(T.a)(i,"onUse",(function(){this.$target=window})),Object(T.a)(i,"onFrame",(function(e){var t=e.hands;if(t.multiHandLandmarks){for(var n=this.handsfree.debug.$canvas.hands.height,i=t.multiHandedness.some((function(e){return"Right"===e.label})),s=t.multiHandedness.some((function(e){return"Left"===e.label})),a=0;a<t.multiHandLandmarks.length;a++)for(var o="Right"===t.multiHandedness[a].label?0:1,r=0;r<4;r++){var d=t.multiHandLandmarks[a][4].x-t.multiHandLandmarks[a][this.fingertipIndex[r]].x,h=t.multiHandLandmarks[a][4].y-t.multiHandLandmarks[a][this.fingertipIndex[r]].y,c=Math.sqrt(d*d+h*h)*n;(this.thresholdMet[o][r]=c<this.config.threshold)&&(this.curPinch[o][r]=t.multiHandLandmarks[a][4],this.framesSinceLastGrab[o][r]>this.config.numThresholdErrorFrames&&(this.origPinch[o][r]=t.multiHandLandmarks[a][4],this.handsfree.TweenMax.killTweensOf(this.tween[o][r])),this.framesSinceLastGrab[o][r]=0),++this.framesSinceLastGrab[o][r]}t.origPinch=this.origPinch,t.curPinch=this.curPinch,this.handsfree.data.hands=this.getPinchStates(t,i,s)}})),Object(T.a)(i,"getPinchStates",(function(e,t,n){var i=[t,n];e.pinchState=[["","","",""],["","","",""]];for(var s=0;s<2;s++)for(var a=0;a<4;a++)i[s]&&this.thresholdMet[s][a]?(this.pinchDowned[s][a]++,document.body.classList.add("handsfree-finger-pinched-".concat(s,"-").concat(a),"handsfree-finger-pinched-".concat(a))):(this.pinchUp[s][a]=this.pinchDowned[s][a],this.pinchDowned[s][a]=0,document.body.classList.remove("handsfree-finger-pinched-".concat(s,"-").concat(a),"handsfree-finger-pinched-".concat(a))),this.pinchDowned[s][a]>0&&this.pinchDowned[s][a]<=this.config.maxMouseDownedFrames?e.pinchState[s][a]="start":this.pinchDowned[s][a]>this.config.maxMouseDownedFrames?e.pinchState[s][a]="held":this.pinchUp[s][a]?e.pinchState[s][a]="released":e.pinchState[s][a]="",e.pinchState[s][a]&&(this.handsfree.emit("finger-pinched-".concat(s,"-").concat(a),{event:e.pinchState[s][a],origPinch:e.origPinch[s][a],curPinch:e.curPinch[s][a]}),this.handsfree.emit("finger-pinched-".concat(e.pinchState[s][a],"-").concat(s,"-").concat(a),{event:e.pinchState[s][a],origPinch:e.origPinch[s][a],curPinch:e.curPinch[s][a]}),this.handsfree.emit("finger-pinched-".concat(a),{event:e.pinchState[s][a],origPinch:e.origPinch[s][a],curPinch:e.curPinch[s][a]}),this.handsfree.emit("finger-pinched-".concat(e.pinchState[s][a],"-").concat(a),{event:e.pinchState[s][a],origPinch:e.origPinch[s][a],curPinch:e.curPinch[s][a]}));return e})),i)},S=0,F=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),this.throttle=L.a,this.TweenMax=D.a,this.id=++S,this.version="8.2.0",this.data={},this.dependencies={loading:[],loaded:[]},this.mediapipeWarmups={isWarmingUp:!1,hands:!1,pose:!1,facemesh:!1,holistic:!1},this.plugin={},this.taggedPlugins={untagged:[]},this.config=this.cleanConfig(n),this.setupDebugger(),this.prepareModels(),this.loadCorePlugins(),this.numModelsLoaded=0,this.on("modelReady",(function(){var e=0;Object.keys(t.model).forEach((function(n){t.model[n].enabled&&++e})),++t.numModelsLoaded===e&&(document.body.classList.remove("handsfree-loading"),document.body.classList.add("handsfree-started"),t.config.isClient||(t.isLooping=!0,t.loop()))})),this.emit("init",this)}return Object(a.a)(e,[{key:"prepareModels",value:function(){this.model={weboji:{},hands:{},facemesh:{},pose:{},holistic:{},handpose:{}},this.model.weboji=new w(this,this.config.weboji),this.model.hands=new l(this,this.config.hands),this.model.pose=new f(this,this.config.pose),this.model.facemesh=new u(this,this.config.facemesh),this.model.holistic=new p(this,this.config.holistic),this.model.handpose=new b(this,this.config.handpose)}},{key:"cleanConfig",value:function(e,t){return t||(t=Object.assign({},x)),t.setup.wrap.$parent=document.body,"boolean"==typeof e.weboji&&(e.weboji={enabled:e.weboji}),"boolean"==typeof e.hands&&(e.hands={enabled:e.hands}),"boolean"==typeof e.facemesh&&(e.facemesh={enabled:e.facemesh}),"boolean"==typeof e.pose&&(e.pose={enabled:e.pose}),"boolean"==typeof e.holistic&&(e.holistic={enabled:e.holistic}),"boolean"==typeof e.handpose&&(e.handpose={enabled:e.handpose}),e.plugin&&Object.keys(e.plugin).forEach((function(t){"boolean"==typeof e.plugin[t]&&(e.plugin[t]={enabled:e.plugin[t]})})),k()({},t,e)}},{key:"update",value:function(e,t){var n=this;this.config=this.cleanConfig(e,this.config),["hands","facemesh","pose","holistic","handpose","weboji"].forEach((function(t){var i=n.model[t].enabled;n.config[t]=n.model[t].config=k()({},n.model[t].config,e[t]),i&&!n.config[t].enabled?n.model[t].disable():!i&&n.config[t].enabled&&n.model[t].enable(!1)})),e.plugin&&Object.keys(e.plugin).forEach((function(t){"boolean"==typeof e.plugin[t].enabled&&(e.plugin[t].enabled?n.plugin[t].enable():n.plugin[t].disable())})),this.isLooping&&t?t():this.start(t)}},{key:"start",value:function(e){var t=this;this.config=this.cleanConfig(this.config,this.config),document.body.classList.add("handsfree-loading"),this.emit("loading",this),e&&this.on("modelReady",e,{once:!0}),this.numModelsLoaded=0,Object.keys(this.model).forEach((function(e){var n=t.model[e];n.enabled&&!n.dependenciesLoaded?n.loadDependencies():n.enabled&&(t.emit("modelReady",n),t.emit("".concat(e,"ModelReady"),n))})),Object.keys(this.config.plugin).forEach((function(e){var n,i;"boolean"==typeof(null===(n=t.config.plugin)||void 0===n||null===(i=n[e])||void 0===i?void 0:i.enabled)&&t.config.plugin[e].enabled&&t.plugin[e].enable()}))}},{key:"stop",value:function(){location.reload()}},{key:"pause",value:function(){this.isLooping=!1}},{key:"unpause",value:function(){this.isLooping||(this.isLooping=!0,this.loop())}},{key:"loop",value:function(){var e,t=this;(Object.keys(this.model).forEach((function(e){var n=t.model[e];n.enabled&&n.dependenciesLoaded&&n.getData()})),this.emit("data",this.data),null===(e=this.taggedPlugins.untagged)||void 0===e||e.forEach((function(e){var n;t.plugin[e].enabled&&(null===(n=t.plugin[e])||void 0===n||n.onFrame(t.data))})),this.isDebugging)&&(["hands","pose","holistic","handpose","facemesh"].find((function(e){if(t.model[e].enabled)return e}))&&this.debug.context.video.drawImage(this.debug.$video,0,0,this.debug.$canvas.video.width,this.debug.$canvas.video.height));this.isLooping&&requestAnimationFrame((function(){return t.isLooping&&t.loop()}))}},{key:"use",value:function(e,t){var n=this;return"function"==typeof t&&(t={onFrame:t}),"string"==typeof(t=k()({},{name:e,models:[],tags:[],enabled:!0,config:{},onFrame:null,onUse:null,onEnable:null,onDisable:null},t)).models&&(t.models=[t.models]),"string"==typeof t.tags&&(t.tags=[t.tags]),t.tags.forEach((function(t){n.taggedPlugins[t]||(n.taggedPlugins[t]=[]),n.taggedPlugins[t].push(e)})),this.plugin[e]=new j(t,this),this.plugin[e].onUse&&this.plugin[e].onUse(),t.models.length?t.models.forEach((function(t){n.model[t].plugins.push(e)})):this.taggedPlugins.untagged.push(e),this.plugin[e]}},{key:"enablePlugins",value:function(e){var t=this;"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedPlugins)),e.forEach((function(e){t.taggedPlugins[e].forEach((function(e){t.plugin[e].enable()}))}))}},{key:"disablePlugins",value:function(e){var t=this;"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedPlugins)),e.forEach((function(e){t.taggedPlugins[e].forEach((function(e){t.plugin[e].disable()}))}))}},{key:"runPlugins",value:function(e){var t,n=this;this.data=e,Object.keys(this.model).forEach((function(t){n.model[t].data=null==e?void 0:e[t],n.model[t].runPlugins()})),null===(t=this.taggedPlugins.untagged)||void 0===t||t.forEach((function(e){var t;n.plugin[e].enabled&&(null===(t=n.plugin[e])||void 0===t||t.onFrame(n.data))}))}},{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new CustomEvent("handsfree-".concat(e),{detail:t});document.dispatchEvent(n)}},{key:"on",value:function(e,t,n){document.addEventListener("handsfree-".concat(e),(function(e){t(e.detail)}),n)}},{key:"normalize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e-n)/(t-n)}},{key:"getUserMedia",value:function(e){var t=this;this.debug.stream||this.debug.isGettingStream?!this.debug.stream&&this.debug.isGettingStream?e&&this.on("gotUserMedia",e):(this.debug.$video.play(),this.emit("gotUserMedia",this.debug.stream),e&&e()):(this.debug.isGettingStream=!0,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:this.debug.$video.width,height:this.debug.$video.height}}).then((function(n){t.debug.stream=n,t.debug.$video.srcObject=n,t.debug.$video.onloadedmetadata=function(){t.debug.$video.play(),t.emit("gotUserMedia",n),e&&e()}})).catch((function(e){console.error("Error getting user media: ".concat(e))})).finally((function(){t.debug.isGettingStream=!1})))}},{key:"loadCorePlugins",value:function(){var e=this;Object.keys(C).forEach((function(t){e.use(t,C[t])}))}},{key:"setupDebugger",value:function(){var e=this;if(this.debug={},!this.config.setup.wrap.$el){var t=document.createElement("DIV");t.classList.add("handsfree-debugger"),this.config.setup.wrap.$el=t}if(this.debug.$wrap=this.config.setup.wrap.$el,!this.config.setup.video.$el){var n=document.createElement("VIDEO");n.setAttribute("playsinline",!0),n.classList.add("handsfree-video"),n.setAttribute("id","handsfree-video-".concat(this.id)),this.config.setup.video.$el=n}this.debug.$video=this.config.setup.video.$el,this.debug.$video.width=this.config.setup.video.width,this.debug.$video.height=this.config.setup.video.height,this.debug.$wrap.appendChild(this.debug.$video),this.debug.$canvas={},this.debug.context={},this.config.setup.canvas.video={width:this.debug.$video.width,height:this.debug.$video.height},["video","weboji","facemesh","pose","hands","holistic","handpose"].forEach((function(t){e.debug.$canvas[t]={},e.debug.context[t]={};var n=e.config.setup.canvas[t].$el;n||(n=document.createElement("CANVAS"),e.config.setup.canvas[t].$el=n),n.classList.add("handsfree-canvas","handsfree-canvas-".concat(t),"handsfree-hide-when-started-without-".concat(t)),n.setAttribute("id","handsfree-canvas-".concat(t,"-").concat(e.id)),e.debug.$canvas[t]=e.config.setup.canvas[t].$el,e.debug.$canvas[t].width=e.config.setup.canvas[t].width,e.debug.$canvas[t].height=e.config.setup.canvas[t].height,e.debug.$wrap.appendChild(e.debug.$canvas[t]),["weboji","handpose"].includes(t)?e.debug.$canvas[t].classList.add("handsfree-canvas-webgl"):e.debug.context[t]=e.debug.$canvas[t].getContext("2d")})),this.config.setup.wrap.$parent.appendChild(this.debug.$wrap),this.config.showDebug?this.showDebugger():this.hideDebugger()}},{key:"showDebugger",value:function(){this.isDebugging=!0,document.body.classList.add("handsfree-show-debug"),document.body.classList.remove("handsfree-hide-debug")}},{key:"hideDebugger",value:function(){this.isDebugging=!1,document.body.classList.remove("handsfree-show-debug"),document.body.classList.add("handsfree-hide-debug")}}]),e}();t.default=F}}]);